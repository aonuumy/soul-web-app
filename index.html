<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ü–∞–Ω–µ–ª—å –°–æ—É–ª–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #212121);
            --tg-text: var(--tg-theme-text-color, #ffffff);
            --tg-button: var(--tg-theme-button-color, #5288c1);
            --tg-hint: var(--tg-theme-hint-color, #aaaaaa);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--tg-bg);
            color: var(--tg-text);
            margin: 0;
            padding: 15px;
            box-sizing: border-box;
        }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { margin: 0; font-size: 24px; }
        .button-list { width: 100%; display: flex; flex-direction: column; gap: 12px; }
        .btn { width: 100%; padding: 15px; font-size: 16px; font-weight: 600; border: none; border-radius: 12px; background-color: var(--tg-button); color: var(--tg-theme-button-text, #fff); cursor: pointer; }
        
        /* –ù–ê–® –®–ü–ò–û–ù - –ö–û–ù–°–û–õ–¨ –ù–ê –≠–ö–†–ê–ù–ï */
        #log-output {
            width: 100%;
            height: 150px;
            background-color: #111;
            border: 1px solid var(--tg-hint);
            border-radius: 8px;
            margin-top: 20px;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            overflow-y: auto;
            box-sizing: border-box;
            color: #00ff00;
        }
    </style>
</head>
<body>

    <div class="header" id="user-greeting"><h1>–ü—Ä–∏–≤–µ—Ç, –±—Ä–æ!</h1></div>
    <div class="button-list">
        <button class="btn" id="chats-btn">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏</button>
        <button class="btn" id="donate-btn">‚≠ê –î–æ–Ω–∞—Ç—ã</button>
        <button class="btn" id="support-btn">üí° –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
    </div>
    
    <!-- –í–æ—Ç —Ç—É—Ç –±—É–¥—É—Ç –ª–æ–≥–∏ -->
    <pre id="log-output">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤...</pre>

    <script>
        const tg = Telegram.WebApp;
        const logOutput = document.getElementById('log-output');

        function logOnScreen(message) {
            const now = new Date();
            const time = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
            logOutput.innerHTML += `\n[${time}] ${message}`;
            logOutput.scrollTop = logOutput.scrollHeight; // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
        }

        function sendLogToBot(message) {
            try {
                logOnScreen(`–ü—ã—Ç–∞—é—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É: "${message}"`);
                tg.sendData(message);
                logOnScreen(" > –ö–æ–º–∞–Ω–¥–∞ tg.sendData –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.");
            } catch (e) {
                logOnScreen(` > –û–®–ò–ë–ö–ê: ${e.message}`);
            }
        }

        tg.ready();
        logOnScreen("WebApp –≥–æ—Ç–æ–≤–æ.");
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–≥ –æ –∑–∞–≥—Ä—É–∑–∫–µ
        sendLogToBot('web_app_log: –°–∞–π—Ç –∑–∞–≥—Ä—É–∂–µ–Ω!');

        document.getElementById('chats-btn').addEventListener('click', () => {
             logOnScreen("–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏'.");
             tg.showAlert('–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!');
        });
        document.getElementById('donate-btn').addEventListener('click', () => {
            logOnScreen("–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ '–î–æ–Ω–∞—Ç—ã'.");
            tg.showAlert('–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!');
        });
        document.getElementById('support-btn').addEventListener('click', () => {
            logOnScreen("–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ '–ü–æ–¥–¥–µ—Ä–∂–∫–∞'.");
            sendLogToBot('/support');
            // tg.close(); // <--- –í–û–¢! –£–ë–†–ê–õ–ò –ó–ê–ö–†–´–¢–ò–ï –î–õ–Ø –¢–ï–°–¢–ê
        });

    </script>

</body>
</html>

